# 系统架构师设计教程(清华)
## 绪论
软件架构定义如下：系统软件架构是关于软件系统的结构、行为和属性的高级抽象。在描述阶段，其对象是直接构成系统的抽象组件以及各个组件直接的连接规则，
特别是相对细致地描述组件之间的通讯。在实现阶段，这些抽象组件被细化为实际的组件，比如具体的类或对象。软件系统架构不仅指定系统软件的组织结构和拓扑结构，
而且显示了系统需求和构成组件之间的对应关系，包括设计决策的基本方法和基本原则。

著名企业架构框架：TOGAF The Open Group Architecture Framework  

架构师类别：业务架构师（Business Architect）、技术架构师(Technology Architect)、主题领域架构师(Domain architect)、项目架构师、系统架构师(System Architect)

系统架构师定义：系统架构师是系统或产业线的设计负责人，一个负责理解和管理并最终确认和评估非功能性系统需求（如软件的可维护性、性能、复用性、可靠性、有效性和可测试性等）
给出开发规范，搭建系统实现核心架构，对整体软件架构、关键构件、接口进行总体设计并澄清关键技术细节的高级技术人员。

系统架构定位：基于环境和资源的系统技术实现。
项目管理师：人员、资金、设备。
系统分析师：主要业务需求分析、系统需求分析、可行性分析等

系统架构师知识结构
* 战略规划能力
* 业务流程建模能力
* 业务建模能力
* 信息数据架构能力
* 技术架构选择和实现能力
* 应用系统的解决和实现能力
* 基础IT知识及基础设施、资源调配能力
* 信息安全技术支持与管理保障能力
* IT审计、治理与基本需求分析、获取能力
* 面向系统软件可靠性与系统生命周期的质量保障服务能力

架构师认证
* UC Irvine
* CMU/SEI
* iCMG

## 计算机与网络基础知识
计算机由硬件和软件组成。软件分为系统软件和应用软件。

系统软件支持应用软件运行，为用户开发应用软件提供平台，用户可以使用它，不可以修改它。系统软件有操作系统、语言处理程序等。

应用软件：用户利用计算机软、硬件资源为某一专门的应用目的而开发的软件，例如表格、计算器等。

### 操作系统原理、类型和结构
操作系统定义：硬件资源包括在预处理、存储器、和输入输出等物理设备。软件资源是以文件形式保存在存储器上的程序和数据等信息。
操作系统既能有效地组织和管理系统中各种软、硬件资源，合理地组织计算机系统的工作流程，又能控制程序性的执行，并且为用户使用计算机体
提供一种良好的环境和友好的接口，从而是用户充分利用计算机资源，提高系统效率。

操作系统分类：单用户操作系统和批处理操作系统，分时操作系统和实时操作系统；网络操作系统和分布式操作系统；以及嵌入式操作系统

系统特性：并发性、共享性、虚拟性、不确定性

系统功能：进程管理、文件管理、存储管理、设备管理、作业管理

### 处理机和进程管理
进程（process）是资源分配和独立运行的基本单位。研究进程实质上是研究系统中诸多进程之间的并发性以及进程之间的相互制约性。

进程定义：是程序的一次执行，改程序可以和其他程序并发执行。进程通常由程序、数据、进程控制块（Process Control Block,PCB）组成,PCB进程存在唯一标识。

程序和进程区别：陈旭静态指令序列，进程是为执行该程序的线程而保留的资源集合。

进程分为：系统进行、用户进行；父进程和子进程。

#### 进程状态转换和控制
三态模型：就绪、运行、阻塞

三态转换关系：![Image text](https://raw.githubusercontent.com/DEAN-Lee/img-rep/master/system_architecture/Snipaste_2020-11-18_14-16-49.png)

五态模型：新建、就绪、运行、阻塞、终止

五态进程态：![Image text](https://raw.githubusercontent.com/DEAN-Lee/img-rep/master/system_architecture/Snipaste_2020-11-18_14-17-07.png)

五态进程态和转换：![Image text](https://raw.githubusercontent.com/DEAN-Lee/img-rep/master/system_architecture/Snipaste_2020-11-18_14-17-31.png)

进程控制：对系统中所有进程从创建到消亡的全过程实施有效的控制。主要控制工作时系统内核完成的。进程控制是通过进程控制原语实现，进程控制原语主要创建原语、撤销原语、挂起原语、阻塞原语、唤醒原语。

#### 进程互斥与同步以及P、V操作
* 进程同步

    异步环境下的一组并发进程之间互发消息、相互合作、相互等待，使得各进程按一定的速度执行的过程称为进程同步，在异步环境下各个进程按照一定顺序和速度执行。
  
* 进程互斥
    
    并发进程的一个或多个程序段，因共享某一个公有资源而使得它们必须以一个不允许交叉的顺序执行。互斥进程保证临界资源在某一时刻只被一个进程访问。
    
* 临界资源

    系统中有些资源可以供多个进程同时使用，有些资源一次只能供一个进程使用，称为临界资源（Critical Resource,CR）.
    
* 临界资源管理原则

    临界区（Critical Section,CS)是进程中对临界资源实施操作的那段程序。互斥临界区管理的原则是有空则进、无空则等、有限等待、让权等待。
    
* 信号量机制

    1965年提出、卓有成效的进程同步与互斥的工具
    
* 整型信号量和PV操作

    信号量一个整型变量，根据控制对象的不同赋不同的值。信号量分为：
    
        公用信号量：实现进程间的互斥，初始值=1或资源的数目
        私用信号量：实现进程间的同步，初始值=0或某个正整数。
    
    信号量S物理意义：S>=0表示某资源的可用数，S<0其绝对值表示阻塞队列中等待该资源的进程数。
    
    PV操作是实现进程同步与互斥的常用方法。PV操作是低级通信原语，执行期间不可分割。P表示申请资源，V表示释放资源。
   
    P操作定义：S:=S-1,若S>=0, 则执行P操作的进程继续执行；若S<0, 则置该进程为阻塞状态（无可用资源），并将其插入阻塞队列。
    ```
    Procedure P (Var S:Semaphore);
        Begin
            S:=S-1;
            IF S< 0 then W (s);
        END;
    ```
    V操作定义：S:=S+1, 若S>0, 则执行V操作的进程继续执行；若S<=0,则从阻塞状态唤醒一个进程，并将其插入就像队列，然后执行V操作的进程继续执行。
    ``` 
    Procedure P （Var S:Semaphore)
        Begin
            S:=S+1;
            IF S <=0 then R （S）
        End
    ```
* 利用PV操作实现进程互斥
    令信号量mutex的初始值为1，当进入临界区时执行P操作，退出临界区时执行V操作。
    ```text
    P （mutex）
    临界区
    V (mutex)
    ```
* 利用PV操作实现进程同步
    进程同步是由与进程间合作引起的相互制约的问题，要实现进程的同步可用一个信号量与消息联系起来。当信号量的值为0时表示希望的消息为产生，
    当信号量非0时表示希望的消息已经存在。假定用信号量S表示某条消息，进程可以通过调用P操作测试消息是否到达，调用V操作通知消息已到达。
    
    生产者消费者
    ```text
     生产者
    Loop
    生产一个产品 next;
    P（Bufempty）;
    Next 产品存缓冲区；
    V (Buffull);
    endloop
    消费者
    Loop
    P(Buffull);
    V(BUfempty);
    从缓冲区取出产品；
    使用产品；
    endloop;
    ```
    其中信号量Bufempty和buffull分别表示缓冲区中的空单元数据和非空单元数，他们的初始值分别为1和0；
    
#### 进程通信和管程

    


