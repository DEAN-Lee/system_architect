# 系统架构师设计教程(清华)-数据库系统基础
数据库（DataBase,DB）是指长期存储在计算机内的，有组织的、可共享的数据集合。

数据库系统（DataBase System,DBS）从广义上来讲是由数据库、硬件、软件和人员组成，管理对象的数据。

数据库管理系统（DataBase Management System,DBMS）是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库。主要功能有数据定义、
数据库操作、数据库运行管理、数据组织、存储和管理、数据库管理和维护以及其他功能。

DBMS分为三类
* 关系数据库系统（Relation DataBase System,RDBS）
* 面向对象的数据库系统 （Object-Oriented DataBase system,OODBS）
* 对象关系数据库系统(Object-Oriented Relation DataBase system,ORDBS)

数据库系统三级模式
* 外模式：外模式也称为子模式或用户模式，它是用户能够看见和使用的局部数据的逻辑结构和特征的描述，是用户的数据视图，是与某一应用有关的数据的逻辑表示。
* 逻辑模式(概念模式)：是对数据库中全体数据的逻辑结构和特征的描述、是对型的描述，不涉及具具体值、模式是相对稳定的，是数据库系统模式结构的中间层，既不涉及数据库存储细节和硬件环境，也不涉及具体的应用程序、所使用的应用开发工具和高级程序设计语言。
* 内模式：内模式也称为存储模式，它是数据库在物理存储器上具体实现的描述，是数据在数据库内部的表示方法，也是数据物理结构和存储方式的描述。一个数据库只有一种内模式。

三级模式映射
* 外模式/模式之间的映射
* 模式/内模式之间的映射

模式映射意义保证数据库中的数据具有较高的逻辑独立性和物理独立性。

数据库系统体系结构

![Image text](https://github.com/DEAN-Lee/img-rep/blob/master/system_architecture/Snipaste_2020-11-26_18-55-40.png)

## 关系数据库基础
### 数据库的结构和模式
数据库结构基础是数据模型，是用来描述数据的一组概念和定义。

数据模型三要素
* 数据结构
* 数据操作
* 数据的约束条件

常用数据模型
* 概念数据模型
* 基本数据模型
* 面向对象模型

关系数据模型组成
* 关系数据结构
* 关系操作集合
* 关系完整性约束

### 实体-联系（E-R）模型
概念模型中常用方法实体-联系方法，简称E-R方法。主要概念有实体、联系和属性。该方法直接从现实世界中抽象出实体和实体间的联系。如下图

![Image text](https://github.com/DEAN-Lee/img-rep/blob/master/system_architecture/Snipaste_2020-11-27_17-30-59.png)

E-R图只要构件:

![Image text](https://github.com/DEAN-Lee/img-rep/blob/master/system_architecture/Snipaste_2020-11-27_17-31-20.png)

### 数据的规范化
规范化理论研究的是关系模式中各属性之间的依赖关系以及其对关系模式性能的影响。

范式是关系模型满足的确定约束条件，一般情况下，我们使用前三个范式已经够用了，不再使用更多范式，就能完成对数据的优化，达到最优效果。常用范式有
* 第一范式1NF：属于第一范式关系的所有属性都不可再分，即数据项不可分。一范式强调数据表的原子性，是其他范式的基础

* 第二范式2NF ：若某关系R属于第一范式，且每一个非主属性完全函数依赖于任何一个候选码，则关系R属于第二范式。第二范式是指每个表必须有一个（有且仅有一个）
数据项作为关键字或主键（primary key），其他数据项与关键字或者主键一一对应，即其他数据项完全依赖于关键字或主键。
        
        候选码：若关系中的某一属性组的值能唯一地标识一个元组，而其子集不能，则称该属性组为候选码。
        
        主码：若一个关系中有多个候选码，则选定其中一个为主码，主码和候选码统称为码。
        
        函数依赖：完全依赖、部分依赖、传递函数依赖
        
        属性：属性就是我们在表中定义的每一个列。
        
        主属性： 所有候选码的属性称为主属性。不包含在任何候选码中的属性称为非主属性或非码属性。
    
* 第三范式3NF

* 巴克斯范式 BCNF

* 第四范式4NF

* 第五范式5NF

关系模型的规范化是指把一个低一级的范式的关系模式转换成若干个高一级范式的关系模式的过程。









